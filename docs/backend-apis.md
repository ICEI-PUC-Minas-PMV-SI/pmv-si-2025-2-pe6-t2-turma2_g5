# APIs e Web Services

~O planejamento de uma aplica√ß√£o de APIS Web √© uma etapa fundamental para o sucesso do projeto. Ao planejar adequadamente, voc√™ pode evitar muitos problemas e garantir que a sua API seja segura, escal√°vel e eficiente.~
~Aqui est√£o algumas etapas importantes que devem ser consideradas no planejamento de uma aplica√ß√£o de APIS Web.~
~[Inclua uma breve descri√ß√£o do projeto.]~

A Estante Infinita nasce como resposta ao cen√°rio em que o pre√ßo elevado dos livros se imp√µe como barreira ao acesso √† leitura, especialmente ap√≥s os recentes aumentos registrados em g√™neros como Fic√ß√£o. A proposta justifica-se pela necessidade de democratizar o acesso ao conhecimento, criando um marketplace digital que privilegia a compra de usados e a doa√ß√£o gratuita, ampliando o ciclo de vida dos acervos e reduzindo custos. O p√∫blico-alvo s√£o jovens e adultos a partir de 18 anos, estudantes e leitores engajados em pr√°ticas de consumo consciente e sustent√°vel, que buscam alternativas econ√¥micas para acessar novos t√≠tulos e veem na leitura n√£o apenas lazer, mas tamb√©m oportunidade de forma√ß√£o cultural e acad√™mica.


## Objetivos da API

~O primeiro passo √© definir os objetivos da sua API. O que voc√™ espera alcan√ßar com ela? Voc√™ quer que ela seja usada por clientes externos ou apenas por aplica√ß√µes internas? Quais s√£o os recursos que a API deve fornecer?~
~[Inclua os objetivos da sua api.]~

Esta API foi desenvolvida no padr√£o RESTful, utilizando Node.js e Prisma ORM. 

E ser√° respons√°vel por fornecer uma interface centralizada para comunica√ß√£o entre o backend e os clientes web apoiando a plataforma de compra, venda e troca de livros, fornecendo uma camada de servi√ßos confi√°vel e escal√°vel. 

Seus principais objetivos s√£o: 

- Publicar an√∫ncios: possibilitar opera√ß√µes de compra, venda e troca de livros. 

- Permitir intera√ß√£o entre usu√°rios por meio de coment√°rios em an√∫ncios. 

- Expor endpoints REST organizados em recursos (usu√°rios, livros, an√∫ncios, coment√°rios, avalia√ß√µes), garantindo consist√™ncia nas opera√ß√µes CRUD. 

## Modelagem da Aplica√ß√£o
~[Descreva a modelagem da aplica√ß√£o, incluindo a estrutura de dados, diagramas de classes ou entidades, e outras representa√ß√µes visuais relevantes.]~

Segue um modelo relacional para armazenar e gerenciar os dados, utilizando postgreSQL como banco de dados. 
![Diagrama](https://github.com/ICEI-PUC-Minas-PMV-SI/pmv-si-2025-2-pe6-t2-turma2_g5/blob/main/docs/img/Imagem%20do%20WhatsApp%20de%202025-10-01%20%C3%A0(s)%2018.06.33_850fed5c.jpg)

Usu√°rio: informa√ß√µes dos usu√°rios do sistema (id, nome, email, senha, criadoEm, atualizadoEm).

Anuncio: publica√ß√£o de um livro para troca, venda ou doa√ß√£o (id, titulo, autor, descricao, isbn, editora, ano, genero, preco, condicao, tipo, ativo, criadoEm, atualizadoEm, usuarioId). 

Comentario: texto de um us√°rio de um an√∫ncio (id, texto, criadoEm, atualizadoEm, usuarioId, anuncioId).

Avaliacao: informa√ß√µes acerca do usu√°rio (id, avalia√ß√£o, coment√°rio, criadoEm, atualizadoEm, usuarioId, avaliadoId).  

## Tecnologias Utilizadas

~Existem muitas tecnologias diferentes que podem ser usadas para desenvolver APIs Web. A tecnologia certa para o seu projeto depender√° dos seus objetivos, dos seus clientes e dos recursos que a API deve fornecer.~
~[Lista das tecnologias principais que ser√£o utilizadas no projeto.]~

O projeto contempla o desenvolvimento de: 

Backend e API: Implementa√ß√£o em Node.js (com Prisma ORM) respons√°vel pela l√≥gica de neg√≥cios e pela comunica√ß√£o com o banco de dados. 

Banco de Dados: Uso do PostgreSQL hospedado no Supabase, armazenando informa√ß√µes de usu√°rios, livros, an√∫ncios, coment√°rios e avalia√ß√µes. 

Frontend: Aplica√ß√£o web desenvolvida em Angular (Angular CLI), oferecendo uma interface intuitiva para cadastro, autentica√ß√£o, publica√ß√£o e navega√ß√£o de an√∫ncios. 

## API Endpoints

### Servi√ßo de Usu√°rios 

| M√©todo  | Endpoint        | Descri√ß√£o |
|---------|----------------|-----------|
| **POST**    | `/api/auth/register` | Cadastrar um novo usu√°rio.   |
| **POST**    | `/api/auth/login` | Autenticar um usu√°rio.    |
| **GET**    | `/api/usuarios/{id}` | Obter informa√ß√µes de um perfil.  |
| **PUT**    | `/api/usuarios/{id}` | Atualizar informa√ß√µes do perfil.  |
| **DELETE** | `/api/usuarios/{id}` | Deleta um usu√°rio. |

### Servi√ßo de An√∫ncios 

| M√©todo  | Endpoint        | Descri√ß√£o |
|---------|----------------|-----------|
| **POST**    | `/api/anuncios` | Cria an√∫ncio criando um livro junto.   |
| **GET**    | `/api/anuncios/{id}` | Detalha an√∫ncio (inclui livro e, opcionalmente, coment√°rios paginados).    |
| **PUT**    | `/api/anuncios/{id}` | Atualiza an√∫ncio.  |
| **DELETE** | `/api/anuncios/{id}` | Deleta um an√∫ncio. |

### Servi√ßo de Coment√°rio 

| M√©todo  | Endpoint        | Descri√ß√£o |
|---------|----------------|-----------|
| **POST**    | `/api/comentarios` | Cria coment√°rio em um an√∫ncio.   |
| **DELETE** | `/api/comentarios/{id}` | Deleta coment√°rio em um an√∫ncio. |

### Servi√ßo de Coment√°rio 

| M√©todo  | Endpoint        | Descri√ß√£o |
|---------|----------------|-----------|
| **POST**    | `/api/avaliacoes` | Cria an√∫ncio criando um livro junto.   |
| **PUT**    | `/api/avaliacoes/{id}` | Atualiza avalia√ß√£o.    |
| **DELETE** | `/api/avaliacoes/{id}` | Deleta avalia√ß√£o. |
 

### Exemplos de requisi√ß√µes e respostas: 

Para: cadastrar um livro. 
```json
{ 

  "titulo": "O Mundo de Sofia", 

  "autor": " Jostein Gaarder", 

  "descricao": "Pequenas ranhuras", 

} 
```  
Resposta: 201 OK 
```json
{ 

  "success": true, 

  "data": { 

    "id": "a0f9d6a2-4a0a-4a3e-8af9-2a1b9f1c9f00", 

    "titulo": "O Mundo de Sofia", 

    "autor": " Jostein Gaarder", 

    "descricao": "Pequenas ranhuras", 

    "createdAt": "2025-09-12T11:22:33.000Z", 

    "updatedAt": "2025-09-12T11:22:33.000Z" 

  } 

} 
```

Para: Obter informa√ß√µes de um perfil. 
```json
{ 

  "success": true, 

  "data": { 

    "id": "7b3f8b7f-0e8a-4b07-9e05-1e1d9b7b6b10", 

    "name": "Giulia Fernandes", 

    "email": "giulia@pucminas.br", 

    "createdAt": "2025-09-01T12:34:56.000Z", 

    "updatedAt": "2025-09-10T08:20:30.000Z" 

  } 

} 
```

## Considera√ß√µes de Seguran√ßa
~[Discuta as considera√ß√µes de seguran√ßa relevantes para a aplica√ß√£o distribu√≠da, como autentica√ß√£o, autoriza√ß√£o, prote√ß√£o contra ataques, etc.]~

A √∫nica medida de seguran√ßa implementada ser√° de garantir que todas as informa√ß√µes de autentica√ß√£o do usu√°rio, como senhas, ser√£o armazenadas no banco de dados de forma criptografada. N√£o haver√°, neste momento, controles adicionais de autoriza√ß√£o granular, prote√ß√£o contra ataques ou hardening de infraestrutura. 

## Implanta√ß√£o

~[Instru√ß√µes para implantar a aplica√ß√£o distribu√≠da em um ambiente de produ√ß√£o.]~

A Vercel √© respons√°vel pela hospedagem e execu√ß√£o das fun√ß√µes serverless que comp√µem a API da aplica√ß√£o. Conjuntamente, o Supabase prov√™ o servi√ßo de PostgreSQL gerenciado, atuando como a fonte de dados persistente. Por fim, o Prisma ORM gerencia a conex√£o e tradu√ß√£o das consultas entre o c√≥digo da aplica√ß√£o (Vercel) e o banco de dados (Supabase). 

Software 
- Node.js (LTS ‚â• 20.x) como runtime do backend. 
- npm para gerenciamento de depend√™ncias. 
- Prisma CLI  
- PostgreSQL provido pelo Supabase como banco de dados relacional. 

Hardware 
- Como a Vercel √© serverless, os recursos s√£o alocados por execu√ß√£o, mas a configura√ß√£o alvo √© equivalente a: 
- CPU: 1 vCPU por execu√ß√£o. 
- Mem√≥ria: 512 MB por fun√ß√£o. 
- Armazenamento: 2 GB  
- Rede: HTTPS/TLS habilitado por padr√£o (dom√≠nio da Vercel). 

Aplica√ß√£o: Vercel  

Banco de Dados: Supabase (PostgreSQL) hospedado na mesma regi√£o para reduzir lat√™ncia. 


## Testes

[Descreva a estrat√©gia de teste, incluindo os tipos de teste a serem realizados (unit√°rios, integra√ß√£o, carga, etc.) e as ferramentas a serem utilizadas.]

1. Crie casos de teste para cobrir todos os requisitos funcionais e n√£o funcionais da aplica√ß√£o.
2. Implemente testes unit√°rios para testar unidades individuais de c√≥digo, como fun√ß√µes e classes.
3. Realize testes de integra√ß√£o para verificar a intera√ß√£o correta entre os componentes da aplica√ß√£o.
4. Execute testes de carga para avaliar o desempenho da aplica√ß√£o sob carga significativa.
5. Utilize ferramentas de teste adequadas, como frameworks de teste e ferramentas de automa√ß√£o de teste, para agilizar o processo de teste.

# Refer√™ncias

Inclua todas as refer√™ncias (livros, artigos, sites, etc) utilizados no desenvolvimento do trabalho.

# Planejamento

##  Quadro de tarefas

> Apresente a divis√£o de tarefas entre os membros do grupo e o acompanhamento da execu√ß√£o, conforme o exemplo abaixo.

### Semana 1

Atualizado em: 21/04/2024

| Respons√°vel   | Tarefa/Requisito | Iniciado em    | Prazo      | Status | Terminado em    |
| :----         |    :----         |      :----:    | :----:     | :----: | :----:          |
| AlunaX        | Introdu√ß√£o | 01/02/2024     | 07/02/2024 | ‚úîÔ∏è    | 05/02/2024      |
| AlunaZ        | Objetivos    | 03/02/2024     | 10/02/2024 | üìù    |                 |
| AlunoY        | Hist√≥rias de usu√°rio  | 01/01/2024     | 07/01/2005 | ‚åõ     |                 |
| AlunoK        | Personas 1  |    01/01/2024        | 12/02/2005 | ‚ùå    |       |

#### Semana 2

Atualizado em: 21/04/2024

| Respons√°vel   | Tarefa/Requisito | Iniciado em    | Prazo      | Status | Terminado em    |
| :----         |    :----         |      :----:    | :----:     | :----: | :----:          |
| AlunaX        | P√°gina inicial   | 01/02/2024     | 07/03/2024 | ‚úîÔ∏è    | 05/02/2024      |
| AlunaZ        | CSS unificado    | 03/02/2024     | 10/03/2024 | üìù    |                 |
| AlunoY        | P√°gina de login  | 01/02/2024     | 07/03/2024 | ‚åõ     |                 |
| AlunoK        | Script de login  |  01/01/2024    | 12/03/2024 | ‚ùå    |       |

Legenda:
- ‚úîÔ∏è: terminado
- üìù: em execu√ß√£o
- ‚åõ: atrasado
- ‚ùå: n√£o iniciado

